{"version":3,"file":"static/js/625.65e85740.chunk.js","mappings":"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","sources":["components/forms/FileUpload.js","components/nav/AdminNav.js","functions/category.js","functions/product.js","components/forms/ProductUpdateForm.js","pages/admin/product/ProductUpdate.js"],"sourcesContent":["import React from \"react\";\r\nimport Resizer from \"react-image-file-resizer\";\r\nimport axios from \"axios\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Avatar, Badge } from \"antd\";\r\n\r\nconst FileUpload = ({ values, setValues, setLoading }) => {\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  const fileUploadAndResize = (e) => {\r\n    // console.log(e.target.files);\r\n    // resize\r\n    let files = e.target.files; // 3\r\n    let allUploadedFiles = values.images;\r\n\r\n    if (files) {\r\n      setLoading(true);\r\n      for (let i = 0; i < files.length; i++) {\r\n        Resizer.imageFileResizer(\r\n          files[i],\r\n          720,\r\n          720,\r\n          \"JPEG\",\r\n          100,\r\n          0,\r\n          (uri) => {\r\n            // console.log(uri);\r\n            axios\r\n              .post(\r\n                `${process.env.REACT_APP_API}/uploadimages`,\r\n                { image: uri },\r\n                {\r\n                  headers: {\r\n                    authtoken: user ? user.token : \"\",\r\n                  },\r\n                }\r\n              )\r\n              .then((res) => {\r\n                // console.log(\"IMAGE UPLOAD RES DATA\", res);\r\n                setLoading(false);\r\n                allUploadedFiles.push(res.data);\r\n\r\n                setValues({ ...values, images: allUploadedFiles });\r\n              })\r\n              .catch((err) => {\r\n                setLoading(false);\r\n                console.log(\"CLOUDINARY UPLOAD ERR\", err);\r\n              });\r\n          },\r\n          \"base64\"\r\n        );\r\n      }\r\n    }\r\n    // send back to server to upload to cloudinary\r\n    // set url to images[] in the parent component state - ProductCreate\r\n  };\r\n\r\n  const handleImageRemove = (public_id) => {\r\n    setLoading(true);\r\n    // console.log(\"remove image\", public_id);\r\n    axios\r\n      .post(\r\n        `${process.env.REACT_APP_API}/removeimages`,\r\n        { public_id },\r\n        {\r\n          headers: {\r\n            authtoken: user ? user.token : \"\",\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        setLoading(false);\r\n        const { images } = values;\r\n        let filteredImages = images.filter((item) => {\r\n          return item.public_id !== public_id;\r\n        });\r\n        setValues({ ...values, images: filteredImages });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row\">\r\n        {values.images &&\r\n          values.images.map((image) => (\r\n            <Badge\r\n              count=\"X\"\r\n              key={image.public_id}\r\n              onClick={() => handleImageRemove(image.public_id)}\r\n              style={{ cursor: \"pointer\" }}\r\n            >\r\n              <Avatar\r\n                src={image.url}\r\n                size={100}\r\n                shape=\"square\"\r\n                className=\"ml-3\"\r\n              />\r\n            </Badge>\r\n          ))}\r\n      </div>\r\n      <div className=\"row\">\r\n        <label className=\"btn btn-primary btn-raised mt-3\">\r\n          Choose File\r\n          <input\r\n            type=\"file\"\r\n            multiple\r\n            hidden\r\n            accept=\"images/*\"\r\n            onChange={fileUploadAndResize}\r\n          />\r\n        </label>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminNav = () => {\r\n  return (\r\n    <nav>\r\n      <ul className=\"nav flex-column\">\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/admin/dashboard\" className=\"nav-link\">\r\n            Dashboard\r\n          </Link>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/admin/product\" className=\"nav-link\">\r\n            Product\r\n          </Link>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/admin/products\" className=\"nav-link\">\r\n            Products\r\n          </Link>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/admin/category\" className=\"nav-link\">\r\n            Category\r\n          </Link>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/admin/sub\" className=\"nav-link\">\r\n            Sub Category\r\n          </Link>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/admin/coupon\" className=\"nav-link\">\r\n            Coupon\r\n          </Link>\r\n        </li>\r\n\r\n        <li className=\"nav-item\">\r\n          <Link to=\"/user/password\" className=\"nav-link\">\r\n            Password\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default AdminNav;\r\n","import axios from \"axios\";\r\n\r\nexport const getCategories = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/categories`);\r\n\r\nexport const getCategory = async (slug) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/category/${slug}`);\r\n\r\nexport const removeCategory = async (slug, authtoken) =>\r\n  axios.delete(`${process.env.REACT_APP_API}/category/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const updateCategory = async (slug, category, authtoken) =>\r\n  axios.put(`${process.env.REACT_APP_API}/category/${slug}`, category, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const createCategory = async (category, authtoken) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/category`, category, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getCategorySubs = async (_id) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/category/subs/${_id}`);\r\n","import axios from \"axios\";\r\n\r\nexport const createProduct = async (product, authtoken) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/product`, product, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getProductsByCount = async (count) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/products/${count}`);\r\n\r\nexport const removeProduct = async (slug, authtoken) =>\r\n  await axios.delete(`${process.env.REACT_APP_API}/product/${slug}`, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getProduct = async (slug) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/product/${slug}`);\r\n\r\nexport const updateProduct = async (slug, product, authtoken) =>\r\n  await axios.put(`${process.env.REACT_APP_API}/product/${slug}`, product, {\r\n    headers: {\r\n      authtoken,\r\n    },\r\n  });\r\n\r\nexport const getProducts = async (sort, order, page) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/products`, {\r\n    sort,\r\n    order,\r\n    page,\r\n  });\r\n\r\nexport const getProductsCount = async () =>\r\n  await axios.get(`${process.env.REACT_APP_API}/products/total`);\r\n\r\nexport const productStar = async (productId, star, authtoken) =>\r\n  await axios.put(\r\n    `${process.env.REACT_APP_API}/product/star/${productId}`,\r\n    { star },\r\n    {\r\n      headers: {\r\n        authtoken,\r\n      },\r\n    }\r\n  );\r\n\r\nexport const getRelated = async (productId) =>\r\n  await axios.get(`${process.env.REACT_APP_API}/product/related/${productId}`);\r\n\r\nexport const fetchProductsByFilter = async (arg) =>\r\n  await axios.post(`${process.env.REACT_APP_API}/search/filters`, arg);\r\n","import React from \"react\";\r\nimport { Select } from \"antd\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst ProductUpdateForm = ({\r\n  handleSubmit,\r\n  handleChange,\r\n  handleCategoryChange,\r\n  values,\r\n  setValues,\r\n  categories,\r\n  subOptions,\r\n  arrayOfSubs,\r\n  setArrayOfSubs,\r\n  selectedCategory,\r\n}) => {\r\n  // destructure\r\n  const {\r\n    title,\r\n    description,\r\n    price,\r\n    category,\r\n    shipping,\r\n    quantity,\r\n    colors,\r\n    brands,\r\n    color,\r\n    brand,\r\n  } = values;\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div className=\"form-group\">\r\n        <label>Title</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          className=\"form-control\"\r\n          value={title}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Description</label>\r\n\r\n        <textarea\r\n          name=\"description\"\r\n          type=\"textarea\"\r\n          className=\"form-control\"\r\n          value={description}\r\n          onChange={handleChange}\r\n          cols={10}\r\n          rows={10}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Price</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"price\"\r\n          className=\"form-control\"\r\n          value={price}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Shipping</label>\r\n        <select\r\n          name=\"shipping\"\r\n          className=\"form-control\"\r\n          onChange={handleChange}\r\n          value={shipping === \"No\" ? \"No\" : \"Yes\"}\r\n        >\r\n          <option value=\"No\">No</option>\r\n          <option value=\"Yes\">Yes</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Quantity</label>\r\n        <input\r\n          type=\"number\"\r\n          name=\"quantity\"\r\n          className=\"form-control\"\r\n          value={quantity}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Color</label>\r\n        <select\r\n          value={color}\r\n          name=\"color\"\r\n          className=\"form-control\"\r\n          onChange={handleChange}\r\n        >\r\n          {colors.map((c) => (\r\n            <option key={c} value={c}>\r\n              {c}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Brand</label>\r\n        <select\r\n          value={brand}\r\n          name=\"brand\"\r\n          className=\"form-control\"\r\n          onChange={handleChange}\r\n        >\r\n          {brands.map((b) => (\r\n            <option key={b} value={b}>\r\n              {b}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>Category</label>\r\n        <select\r\n          name=\"category\"\r\n          className=\"form-control\"\r\n          onChange={handleCategoryChange}\r\n          value={selectedCategory ? selectedCategory : category._id}\r\n        >\r\n          {categories.length > 0 &&\r\n            categories.map((c) => (\r\n              <option key={c._id} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div>\r\n        <label>Sub Categories</label>\r\n        <Select\r\n          mode=\"multiple\"\r\n          style={{ width: \"100%\" }}\r\n          placeholder=\"Please select\"\r\n          value={arrayOfSubs}\r\n          onChange={(value) => setArrayOfSubs(value)}\r\n        >\r\n          {subOptions.length > 0 &&\r\n            subOptions.map((s) => (\r\n              <Option key={s._id} value={s._id}>\r\n                {s.name}\r\n              </Option>\r\n            ))}\r\n        </Select>\r\n      </div>\r\n\r\n      <br />\r\n      <button className=\"btn btn-outline-info\">Save</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ProductUpdateForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport AdminNav from \"../../../components/nav/AdminNav\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getProduct, updateProduct } from \"./../../../functions/product\";\r\nimport { getCategories, getCategorySubs } from \"./../../../functions/category\";\r\nimport FileUpload from \"../../../components/forms/FileUpload\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport ProductUpdateForm from \"../../../components/forms/ProductUpdateForm\";\r\n\r\nconst initialState = {\r\n  title: \"\",\r\n  description: \"\",\r\n  price: \"\",\r\n  category: \"\",\r\n  subs: [],\r\n  shipping: \"\",\r\n  quantity: \"\",\r\n  images: [],\r\n  colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n  brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\r\n  color: \"\",\r\n  brand: \"\",\r\n};\r\n\r\nconst ProductUpdate = ({ match, history }) => {\r\n  // state\r\n  const [values, setValues] = useState(initialState);\r\n  const [subOptions, setSubOptions] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [arrayOfSubs, setArrayOfSubs] = useState([]);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n\r\n  // router\r\n  const { slug } = match.params;\r\n\r\n  useEffect(() => {\r\n    loadProduct();\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadProduct = () =>\r\n    getProduct(slug)\r\n      .then((p) => {\r\n        // console.log(\"single product ==>\", p);\r\n        // 1.load single product\r\n        setValues({ ...values, ...p.data });\r\n        // 2. load single product category subs\r\n        getCategorySubs(p.data.category._id).then((res) => {\r\n          setSubOptions(res.data);\r\n        });\r\n        // 3. prepare array of sub ._id to show as default select antd\r\n        let arr = [];\r\n        p.data.subs.map((s) => {\r\n          arr.push(s._id);\r\n        });\r\n        // console.log(\"ARRAY OF SUBS\", arr);\r\n        setArrayOfSubs((prev) => arr);\r\n      })\r\n      .catch((err) => console.log(err));\r\n\r\n  const loadCategories = () =>\r\n    getCategories().then((c) => {\r\n      setCategories(c.data);\r\n      // console.log(c.data);\r\n    });\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    values.subs = arrayOfSubs;\r\n    values.category = selectedCategory ? selectedCategory : values.category;\r\n\r\n    updateProduct(slug, values, user.token)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        // console.log(res);\r\n        toast.success(`\"${res.data.title}\" is updated`);\r\n        history.push(\"/admin/products\");\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        console.log(err);\r\n        toast.error(err.response.data.err);\r\n      });\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n    //\r\n  };\r\n\r\n  const handleCategoryChange = (e) => {\r\n    e.preventDefault();\r\n    setValues({ ...values, subs: [] });\r\n\r\n    setSelectedCategory(e.target.value);\r\n\r\n    getCategorySubs(e.target.value).then((res) => {\r\n      // console.log(\"SUB RESPONSE\", res);\r\n      setSubOptions(res.data);\r\n    });\r\n\r\n    // if user clicks back to the original category\r\n    // show its sub categories in defualt\r\n    if (values.category._id === e.target.value) {\r\n      loadProduct();\r\n    }\r\n\r\n    // clear old sub category ids\r\n    setArrayOfSubs([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-2\">\r\n          <AdminNav />\r\n        </div>\r\n\r\n        <div className=\"col-md-10\">\r\n          {/* {JSON.stringify(values)} */}\r\n          {loading ? (\r\n            <LoadingOutlined className=\"text-danger h1 pb-2 text-center\" />\r\n          ) : (\r\n            <h4 className=\"pb-2 text-center\">Product Update</h4>\r\n          )}\r\n          <hr />\r\n\r\n          <div className=\"p-3\">\r\n            <FileUpload\r\n              values={values}\r\n              setValues={setValues}\r\n              setLoading={setLoading}\r\n            />\r\n          </div>\r\n\r\n          <ProductUpdateForm\r\n            handleSubmit={handleSubmit}\r\n            handleChange={handleChange}\r\n            values={values}\r\n            setValues={setValues}\r\n            handleCategoryChange={handleCategoryChange}\r\n            categories={categories}\r\n            subOptions={subOptions}\r\n            arrayOfSubs={arrayOfSubs}\r\n            setArrayOfSubs={setArrayOfSubs}\r\n            selectedCategory={selectedCategory}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductUpdate;\r\n"],"names":["values","setValues","setLoading","user","useSelector","state","className","images","map","image","count","onClick","public_id","axios","process","headers","authtoken","token","then","res","filteredImages","filter","item","catch","err","console","log","style","cursor","src","url","size","shape","type","multiple","hidden","accept","onChange","e","files","target","allUploadedFiles","i","length","Resizer","uri","push","data","to","getCategories","getCategory","slug","removeCategory","updateCategory","category","createCategory","getCategorySubs","_id","createProduct","product","getProductsByCount","removeProduct","getProduct","updateProduct","getProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelated","fetchProductsByFilter","arg","Option","Select","handleSubmit","handleChange","handleCategoryChange","categories","subOptions","arrayOfSubs","setArrayOfSubs","selectedCategory","title","description","price","shipping","quantity","colors","brands","color","brand","onSubmit","name","value","cols","rows","c","b","mode","width","placeholder","s","initialState","subs","match","history","useState","setSubOptions","setCategories","setSelectedCategory","loading","params","useEffect","loadProduct","loadCategories","p","arr","prev","AdminNav","LoadingOutlined","FileUpload","preventDefault","toast","response"],"sourceRoot":""}